---
title: "Functions"
format: pdf
editor: visual
---

## Functions Basics

The basic idea behind functions is to avoid writing repeatable code.

Suppose we want to add 10 to a number or a vector.

```{r}
x <- 1:5
x + 10

```

Suppose this is a common enough operation that is done frequently. We can create a function to do this. Functions have three parts: Name, arguments and body. Let's call our function `add_ten()`

```{r exercise-funct}

add_ten <- function(x){
  x + 10
}

add_ten(10:15)
```

Notice a few things. Unlike some other languages, we do not need to return the final value as `R` automatically returns the last computed value.

```{r exercise-funct}

add_ten(x)
```

```{r exercise-funct}
#vectorised operation
add_ten(10:20)
```

We can also let the user decide what number they want to add and let 10 be the default value in case a number is not supplied.

```{r}
add_num <- function(x, num = 10){
  # adds a specified number to a vector
  x + num
}

args(add_num)
```

```{r}
body(add_num)
add_num
```

Let's apply this to our original x

```{r}
add_num(x)
```

```{r exercise-funct}
add_num(20:25)
```

```{r exercise-funct_args}
add_num(20:25, 100)
```


Suppose we want to return the sum, as well as the difference between x and our chosen number.

```{r}
add_sub_num <- function(x, num = 10){
  add_num <- x + num
  sub_num <- x - num
  
  
  add_num
  sub_num
  
}

add_sub_num(x, 100)
```

The function just returned the last evaluated argument. In this case, we would want to return a list.

```{r exercise-funct_list}
add_sub_num <- function(x, num = 10){
  add_num <- x + num
  sub_num <- x - num
  list(add_num, sub_num)
}

add_sub_num(x)

add_sub_num <- function(x, num = 10){
  sub_num <- x - num
  add_num <- x + num
  
  list(addition = add_num, subtraction = sub_num)
}

output <- add_sub_num(x)
output
```

```{r}
output
class(output)
```

```{r}
output$subtraction

output[[1]][c(1,2,5)]
```

```{r}
y <- add_sub_num(10:20, 5)
```


Accessing elements of a list:

```{r}
y[[1]]
```

```{r}
mean(y$addition)
```

```{r}
mean(y)

```

```{r}
summary(y)
```

```{r}
output[[2]][4]

```

Suppose, we want the user to choose the ***operation***.

```{r}
add_or_sub <- function(x, num = 10, oper = "add"){
  if (oper == "add"){
    x + num
  } else if (oper == "sub"){
    x - num
  } else if (oper == "mult"){
    x * num
  } else cat("Please choose add, sub or mult")
}

args(add_or_sub)
body(add_or_sub)
add_or_sub(x,  oper = "mult")
```

```{r exercise-funct_apply }
add_or_sub(x, num = 100)
```

```{r exercise-funct_args}
add_or_sub(x, oper =  "sub", num = 5)
```

```{r exercise-funct_vectorised}
add_or_sub(100:105)
```
