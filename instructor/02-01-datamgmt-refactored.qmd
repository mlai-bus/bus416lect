---
title: "02-01-datamgmt"
output: html_document
editor_options:
  chunk_output_type: console
---

### Introduction to Data Management in R

In this lecture, we focus on **data management** â€” the set of skills used to:
- inspect raw data
- clean variables
- transform columns
- prepare data for analysis and modeling

These skills are foundational and will be used throughout the course.

---

### Loading Required Packages

```{r}
library(tidyverse)
library(haven)
library(readxl)
library(skimr)
```

---

### Importing Data

R can read data from many different sources and file formats.

```{r}
# Example: reading a CSV file
# data <- read_csv("data/mydata.csv")
```

```{r}
# Example: reading an Excel file
# data <- read_excel("data/mydata.xlsx")
```

```{r}
# Example: reading a Stata file
# data <- read_dta("data/mydata.dta")
```

The function you use depends on the **file format**.

---

### Inspecting the Dataset

Before making changes, it is important to understand the structure of the data.

```{r}
# Basic inspection
head(data)
tail(data)
```

```{r}
# Structure and summary
str(data)
skim(data)
glimpse(data)
```

---

### Selecting Columns

Often, we only need a subset of variables.

```{r}
# Select specific columns
data_selected <- data %>%
  select(var1, var2, var3)
```

#### Student practice

```{r exercise-select_columns}
#| eval: false
# Select two columns of your choice
data_selected <- data %>%
  select(___, ___)
```

---

### Renaming Columns

Clear variable names improve readability.

```{r}
data_renamed <- data %>%
  rename(
    new_name1 = old_name1,
    new_name2 = old_name2
  )
```

#### Student practice

```{r exercise-rename_columns}
#| eval: false
# Rename at least one column
data_renamed <- data %>%
  rename(
    ___ = ___
  )
```

---

### Creating New Variables

New variables are often created using existing ones.

```{r}
data <- data %>%
  mutate(
    new_var = var1 + var2
  )
```

#### Student practice

```{r exercise-mutate}
#| eval: false
# Create a new variable using existing columns
data <- data %>%
  mutate(
    ___ = ___
  )
```

---

### Filtering Rows

Filtering allows us to keep only rows that meet certain conditions.

```{r}
data_filtered <- data %>%
  filter(var1 > 0)
```

#### Student practice

```{r exercise-filter}
#| eval: false
# Filter rows based on a condition
data_filtered <- data %>%
  filter(___)
```

---

### Sorting Data

Sorting (ordering) data helps identify patterns and extremes.

```{r}
data_sorted <- data %>%
  arrange(var1)
```

```{r}
data_sorted_desc <- data %>%
  arrange(desc(var1))
```

#### Student practice

```{r exercise-arrange}
#| eval: false
# Sort the data in descending order
data_sorted <- data %>%
  arrange(desc(___))
```

---

### Key Takeaways

- Always inspect data before transforming it
- Use `select()`, `rename()`, `mutate()`, `filter()`, and `arrange()` for data management
- Clean data makes analysis easier and more reliable

These tools will be used repeatedly in later chapters.
